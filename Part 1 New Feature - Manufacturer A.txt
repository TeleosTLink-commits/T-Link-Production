Part 1: New Feature - Manufacturer Access Portal
Objective: Create a restricted, external-facing portal for Teleos affiliates.

1. Authentication & Roles

New Role: Create a Manufacturer user role.

Sign Up: Allow external users to create an account (Sign Up form).

Permissions: Restricted read-only access. They cannot see internal lab data, only specific queries described below.

Logout: Standard logout functionality.

2. Portal Features (Frontend & Queries)

CoA Lookup:

Input: Lot Number.

Action: Query DB. If match found -> Display/Download associated Certificate of Analysis (PDF).

Sample Inventory Search:

Input: Sample Name.

Action: Display current Quantity available in inventory.

Shipment Dashboard:

View a list of all "Shipment Requests" created by the current user.

Columns: Date, Items, Current Status (Initiated, Processing, Shipped, Delivered).

Contact Support:

Tech Support: Form sending email to jhunzie@ajwalabs.com (Subject: T-Link Platform Support).

Lab Support: Form sending email to eboak@ajwalabs.com (Subject: Shipment/Inventory Question).

3. Shipment Request Workflow (The "Initiated" Stage)

Form Inputs: First Name, Last Name, Company, Delivery Address, Sample Name, Lot Number, Quantity Requested, Scheduled Ship Date.

Post-Submission Logic:

Create record in Shipments table with status Initiated.

Trigger Email Notification to User (to their login email):

Body: "You have created a shipment request on T-Link. You can view the status at any time in the Manufacturer Portal."

Include a summary of the request details.

Part 2: Upgrade - Core Shipping Module (Internal)
Objective: Automate the fulfillment workflow and integrate FedEx API.

1. Shipping State Machine Implement the following status flow for the Shipments table:

Initiated: Request created by Manufacturer (via Portal).

Processing: Lab staff opens the request to prepare it.

Shipped: Label generated and Tracking Number assigned.

Delivered: Confirmed via FedEx API tracking.

2. Stage: "Processing" (Lab Staff View) When a staff member opens an Initiated request:

Auto-Lookup: Fetch Sample details using Lot Number/Name from the request.

Inventory Calculation:

Display: Current Inventory, Requested Amount, Projected Remaining.

Logic: Current_Inventory - Requested_Amount = New_Inventory.

Documentation Automation (SDS): Automatically fetch and print the Safety Data Sheet (SDS) associated with the Lot/Name.

Supply Management:

Show a specific dropdown of shipping supplies (e.g., UN Boxes, Dry Ice, Coolers).

Action: User selects supplies used -> System subtracts count from Supply_Inventory.

3. Safety & Compliance Logic (The 30ml Rule)

Check: Is Requested_Quantity < 30ml?

IF YES (<30ml): Standard shipment. No Dangerous Goods (DG) forms required.

IF NO (>30ml):

Flag as Hazardous/Flammable.

Require generation of Dangerous Goods Declaration form.

Prompt user to print required Warning Labels.

Part 3: FedEx API Integration
Objective: Automate logistics via FedEx REST APIs.

1. Pre-Shipment (Data Mapping)

Map Shipment_Request address fields to FedEx Address Validation API to prevent errors before label generation.

2. Label Generation & Costing

Trigger: When staff clicks "Generate Shipment" in the Processing view.

Action (FedEx Ship API):

Send package weight, dimensions, and destination.

Receive: Shipping Quote (Cost) and Shipping Label (ZPL/PDF).

Receive: Tracking Number.

Database Update:

Save Tracking Number to the Shipment record.

Update Status to Shipped.

3. Tracking & Delivery

Action (FedEx Track API):

Implement a webhook or polling job to check status of active Tracking Numbers.

When FedEx returns "Delivered" -> Update Database Status to Delivered.

Part 4: Implementation Steps for AI
Please implement these changes in the following order:

Database: Update schema for Users (Manufacturers), Shipments (Status columns), and Supplies.

Backend API: Create endpoints for the Portal (Search, Request) and the FedEx Integration services.

Frontend: Build the Manufacturer Portal UI and the Internal Shipping Processing Dashboard.

How to use this with VS Code:
Open your project in VS Code.

Open your Chat/Composer (If using Cursor, Copilot, or similar).

Paste the text above.

Add a specific starting command. For example:

"@Workspace Based on the summary above, please start by writing the SQL/Prisma schema updates required for the new Manufacturer Role and Shipment tables."

Or: "Please outline the file structure needed to build the Manufacturer Portal based on these requirements."